import os
try:
    import re
    import telebot
except:
    os.system("pip install re")
    os.system("pip install telebot")
    
bot = telebot.TeleBot("5023634270:AAGkrTVKoZGQSmrpGdhMUYsr9QAg_0p0hQ0")

country_codes = {
    'Afghanistan ğŸ‡¦ğŸ‡«': ['+93'],
    'Albania ğŸ‡¦ğŸ‡±': ['+355'],
    'Algeria ğŸ‡©ğŸ‡¿': ['+213'],
    'American Samoa ğŸ‡¦ğŸ‡¸': ['+1-684'],
    'Andorra ğŸ‡¦ğŸ‡©': ['+376'],
    'Angola ğŸ‡¦ğŸ‡´': ['+244'],
    'Anguilla ğŸ‡¦ğŸ‡®': ['+1-264'],
    'Antigua and Barbuda ğŸ‡¦ğŸ‡¬': ['+1-268'],
    'Argentina ğŸ‡¦ğŸ‡·': ['+54'],
    'Armenia ğŸ‡¦ğŸ‡²': ['+374'],
    'Aruba ğŸ‡¦ğŸ‡¼': ['+297'],
    'Australia ğŸ‡¦ğŸ‡º': ['+61'],
    'Austria ğŸ‡¦ğŸ‡¹': ['+43'],
    'Azerbaijan ğŸ‡¦ğŸ‡¿': ['+994'],
    'Bahamas ğŸ‡§ğŸ‡¸': ['+1-242'],
    'Bahrain ğŸ‡§ğŸ‡­': ['+973'],
    'Bangladesh ğŸ‡§ğŸ‡©': ['+880'],
    'Barbados ğŸ‡§ğŸ‡§': ['+1-246'],
    'Belarus ğŸ‡§ğŸ‡¾': ['+375'],
    'Belgium ğŸ‡§ğŸ‡ª': ['+32'],
    'Belize ğŸ‡§ğŸ‡¿': ['+501'],
    'Benin ğŸ‡§ğŸ‡¯': ['+229'],
    'Bermuda ğŸ‡§ğŸ‡²': ['+1-441'],
    'Bhutan ğŸ‡§ğŸ‡¹': ['+975'],
    'Bolivia ğŸ‡§ğŸ‡´': ['+591'],
    'Bosnia and Herzegovina ğŸ‡§ğŸ‡¦': ['+387'],
    'Botswana ğŸ‡§ğŸ‡¼': ['+267'],
    'Brazil ğŸ‡§ğŸ‡·': ['+55'],
    'Brunei ğŸ‡§ğŸ‡³': ['+673'],
    'Bulgaria ğŸ‡§ğŸ‡¬': ['+359'],
    'Burkina Faso ğŸ‡§ğŸ‡«': ['+226'],
    'Burundi ğŸ‡§ğŸ‡®': ['+257'],
    'Cambodia ğŸ‡°ğŸ‡­': ['+855'],
    'Cameroon ğŸ‡¨ğŸ‡²': ['+237'],
    'Canada ğŸ‡¨ğŸ‡¦': ['+1'],
    'Cape Verde ğŸ‡¨ğŸ‡»': ['+238'],
    'Cayman Islands ğŸ‡°ğŸ‡¾': ['+1-345'],
    'Central African Republic ğŸ‡¨ğŸ‡«': ['+236'],
    'Chad ğŸ‡¹ğŸ‡©': ['+235'],
    'Chile ğŸ‡¨ğŸ‡±': ['+56'],
    'China ğŸ‡¨ğŸ‡³': ['+86'],
    'Colombia ğŸ‡¨ğŸ‡´': ['+57'],
    'Comoros ğŸ‡°ğŸ‡²': ['+269'],
    'Congo ğŸ‡¨ğŸ‡¬': ['+242'],
    'Democratic Republic of the Congo ğŸ‡¨ğŸ‡©': ['+243'],
    'Costa Rica ğŸ‡¨ğŸ‡·': ['+506'],
    'Ivory Coast ğŸ‡¨ğŸ‡®': ['+225'],
    'Croatia ğŸ‡­ğŸ‡·': ['+385'],
    'Cuba ğŸ‡¨ğŸ‡º': ['+53'],
    'Cyprus ğŸ‡¨ğŸ‡¾': ['+357'],
    'Czech Republic ğŸ‡¨ğŸ‡¿': ['+420'],
    'Denmark ğŸ‡©ğŸ‡°': ['+45'],
    'Djibouti ğŸ‡©ğŸ‡¯': ['+253'],
    'Dominica ğŸ‡©ğŸ‡²': ['+1-767'],
    'Dominican Republic ğŸ‡©ğŸ‡´': ['+1-809', '+1-829', '+1-849'],
    'Ecuador ğŸ‡ªğŸ‡¨': ['+593'],
    'Egypt ğŸ‡ªğŸ‡¬': ['+20'],
    'El Salvador ğŸ‡¸ğŸ‡»': ['+503'],
    'Equatorial Guinea ğŸ‡¬ğŸ‡¶': ['+240'],
    'Eritrea ğŸ‡ªğŸ‡·': ['+291'],
    'Estonia ğŸ‡ªğŸ‡ª': ['+372'],
    'Eswatini ğŸ‡¸ğŸ‡¿': ['+268'],
    'Ethiopia ğŸ‡ªğŸ‡¹': ['+251'],
    'Fiji ğŸ‡«ğŸ‡¯': ['+679'],
    'Finland ğŸ‡«ğŸ‡®': ['+358'],
    'France ğŸ‡«ğŸ‡·': ['+33'],
    'Gabon ğŸ‡¬ğŸ‡¦': ['+241'],
    'Gambia ğŸ‡¬ğŸ‡²': ['+220'],
    'Georgia ğŸ‡¬ğŸ‡ª': ['+995'],
    'Germany ğŸ‡©ğŸ‡ª': ['+49'],
    'Ghana ğŸ‡¬ğŸ‡­': ['+233'],
    'Greece ğŸ‡¬ğŸ‡·': ['+30'],
    'Grenada ğŸ‡¬ğŸ‡©': ['+1-473'],
    'Guatemala ğŸ‡¬ğŸ‡¹': ['+502'],
    'Guinea ğŸ‡¬ğŸ‡³': ['+224'],
    'Guinea-Bissau ğŸ‡¬ğŸ‡¼': ['+245'],
    'Guyana ğŸ‡¬ğŸ‡¾': ['+592'],
    'Haiti ğŸ‡­ğŸ‡¹': ['+509'],
    'Honduras ğŸ‡­ğŸ‡³': ['+504'],
    'Hungary ğŸ‡­ğŸ‡º': ['+36'],
    'Iceland ğŸ‡®ğŸ‡¸': ['+354'],
    'India ğŸ‡®ğŸ‡³': ['+91'],
    'Indonesia ğŸ‡®ğŸ‡©': ['+62'],
    'Iran ğŸ‡®ğŸ‡·': ['+98'],
    'Iraq ğŸ‡®ğŸ‡¶': ['+964'],
    'Ireland ğŸ‡®ğŸ‡ª': ['+353'],
    'Israel ğŸ‡®ğŸ‡±': ['+972'],
    'Italy ğŸ‡®ğŸ‡¹': ['+39'],
    'Jamaica ğŸ‡¯ğŸ‡²': ['+1-876'],
    'Japan ğŸ‡¯ğŸ‡µ': ['+81'],
    'Jordan ğŸ‡¯ğŸ‡´': ['+962'],
    'Kazakhstan ğŸ‡°ğŸ‡¿': ['+7'],
    'Kenya ğŸ‡°ğŸ‡ª': ['+254'],
    'Kiribati ğŸ‡°ğŸ‡®': ['+686'],
    'North Korea ğŸ‡°ğŸ‡µ': ['+850'],
    'South Korea ğŸ‡°ğŸ‡·': ['+82'],
    'Kuwait ğŸ‡°ğŸ‡¼': ['+965'],
    'Kyrgyzstan ğŸ‡°ğŸ‡¬': ['+996'],
    'Laos ğŸ‡±ğŸ‡¦': ['+856'],
    'Latvia ğŸ‡±ğŸ‡»': ['+371'],
    'Lebanon ğŸ‡±ğŸ‡§': ['+961'],
    'Lesotho ğŸ‡±ğŸ‡¸': ['+266'],
    'Liberia ğŸ‡±ğŸ‡·': ['+231'],
    'Libya ğŸ‡±ğŸ‡¾': ['+218'],
    'Liechtenstein ğŸ‡±ğŸ‡®': ['+423'],
    'Lithuania ğŸ‡±ğŸ‡¹': ['+370'],
    'Luxembourg ğŸ‡±ğŸ‡º': ['+352'],
    'North Macedonia ğŸ‡²ğŸ‡°': ['+389'],
    'Madagascar ğŸ‡²ğŸ‡¬': ['+261'],
    'Malawi ğŸ‡²ğŸ‡¼': ['+265'],
    'Malaysia ğŸ‡²ğŸ‡¾': ['+60'],
    'Maldives ğŸ‡²v': ['+960'],
    'Mali ğŸ‡²ğŸ‡±': ['+223'],
    'Malta ğŸ‡²ğŸ‡¹': ['+356'],
    'Marshall Islands ğŸ‡²ğŸ‡­': ['+692'],
    'Mauritania ğŸ‡²ğŸ‡·': ['+222'],
    'Mauritius ğŸ‡²ğŸ‡º': ['+230'],
    'Mexico ğŸ‡²ğŸ‡½': ['+52'],
    'Micronesia ğŸ‡«ğŸ‡²': ['+691'],
    'Moldova ğŸ‡²ğŸ‡©': ['+373'],
    'Monaco ğŸ‡²ğŸ‡¨': ['+377'],
    'Mongolia ğŸ‡²ğŸ‡³': ['+976'],
    'Montenegro ğŸ‡²ğŸ‡ª': ['+382'],
    'Morocco ğŸ‡²ğŸ‡¦': ['+212'],
    'Mozambique ğŸ‡²ğŸ‡¿': ['+258'],
    'Myanmar ğŸ‡²ğŸ‡²': ['+95'],
    'Namibia ğŸ‡³ğŸ‡¦': ['+264'],
    'Nauru ğŸ‡³ğŸ‡·': ['+674'],
    'Nepal ğŸ‡³ğŸ‡µ': ['+977'],
    'Netherlands ğŸ‡³ğŸ‡±': ['+31'],
    'New Zealand ğŸ‡³ğŸ‡¿': ['+64'],
    'Nicaragua ğŸ‡³ğŸ‡®': ['+505'],
    'Niger ğŸ‡³ğŸ‡ª': ['+227'],
    'Nigeria ğŸ‡³ğŸ‡¬': ['+234'],
    'Norway ğŸ‡³ğŸ‡´': ['+47'],
    'Oman ğŸ‡´ğŸ‡²': ['+968'],
    'Pakistan ğŸ‡µğŸ‡°': ['+92'],
    'Palau ğŸ‡µğŸ‡¼': ['+680'],
    'Panama ğŸ‡µğŸ‡¦': ['+507'],
    'Papua New Guinea ğŸ‡µğŸ‡¬': ['+675'],
    'Paraguay ğŸ‡µğŸ‡¾': ['+595'],
    'Peru ğŸ‡µğŸ‡ª': ['+51'],
    'Philippines ğŸ‡µğŸ‡­': ['+63'],
    'Poland ğŸ‡µğŸ‡±': ['+48'],
    'Portugal ğŸ‡µğŸ‡¹': ['+351'],
    'Qatar ğŸ‡¶ğŸ‡¦': ['+974'],
    'Romania ğŸ‡·ğŸ‡´': ['+40'],
    'Russia ğŸ‡·ğŸ‡º': ['+7'],
    'Rwanda ğŸ‡·ğŸ‡¼': ['+250'],
    'Saint Kitts and Nevis ğŸ‡°ğŸ‡³': ['+1-869'],
    'Saint Lucia ğŸ‡±ğŸ‡¨': ['+1-758'],
    'Saint Vincent and the Grenadines ğŸ‡»ğŸ‡¨': ['+1-784'],
    'Samoa ğŸ‡¼ğŸ‡¸': ['+685'],
    'San Marino ğŸ‡¸ğŸ‡²': ['+378'],
    'Sao Tome and Principe ğŸ‡¸ğŸ‡¹': ['+239'],
    'Saudi Arabia ğŸ‡¸ğŸ‡¦': ['+966'],
    'Senegal ğŸ‡¸ğŸ‡³': ['+221'],
    'Serbia ğŸ‡·ğŸ‡¸': ['+381'],
    'Seychelles ğŸ‡¸ğŸ‡¨': ['+248'],
    'Sierra Leone ğŸ‡¸L': ['+232'],
    'Singapore ğŸ‡¸ğŸ‡¬': ['+65'],
    'Slovakia ğŸ‡¸ğŸ‡°': ['+421'],
    'Slovenia ğŸ‡¸ğŸ‡®': ['+386'],
    'Solomon Islands ğŸ‡¸B': ['+677'],
    'Somalia ğŸ‡¸O': ['+252'],
    'South Africa ğŸ‡¿ğŸ‡¦': ['+27'],
    'Spain ğŸ‡ªğŸ‡¸': ['+34'],
    'Sri Lanka ğŸ‡±ğŸ‡°': ['+94'],
    'Sudan ğŸ‡¸D': ['+249'],
    'Suriname ğŸ‡¸R': ['+597'],
    'Sweden ğŸ‡¸E': ['+46'],
    'Switzerland ğŸ‡¨H': ['+41'],
    'Syria ğŸ‡¸Y': ['+963'],
    'Taiwan ğŸ‡¹ğŸ‡¼': ['+886'],
    'Tajikistan ğŸ‡¹J': ['+992'],
    'Tanzania ğŸ‡¹Z': ['+255'],
    'Thailand ğŸ‡¹H': ['+66'],
    'Timor-Leste ğŸ‡¹L': ['+670'],
    'Togo ğŸ‡¹G': ['+228'],
    'Tonga ğŸ‡¹O': ['+676'],
    'Trinidad and Tobago ğŸ‡¹T': ['+1-868'],
    'Tunisia ğŸ‡¹N': ['+216'],
    'Turkey ğŸ‡¹R': ['+90'],
    'Turkmenistan ğŸ‡¹M': ['+993'],
    'Tuvalu ğŸ‡¹V': ['+688'],
    'Uganda ğŸ‡ºG': ['+256'],
    'Ukraine ğŸ‡ºA': ['+380'],
    'United Arab Emirates ğŸ‡¦E': ['+971'],
    'United Kingdom ğŸ‡¬ğŸ‡§': ['+44'],
    'Uruguay ğŸ‡ºY': ['+598'],
    'Uzbekistan ğŸ‡ºZ': ['+998'],
    'Vanuatu ğŸ‡»U': ['+678'],
    'Vatican City ğŸ‡»A': ['+39'],
    'Venezuela ğŸ‡»E': ['+58'],
    'Vietnam ğŸ‡»N': ['+84'],
    'Yemen ğŸ‡¾E': ['+967'],
    'Zambia ğŸ‡¿M': ['+260'],
    'Zimbabwe ğŸ‡¿W': ['+263']
}

def find_country(phone_number):
    phone_number = re.sub(r'\D', '', phone_number)
    for country, codes in country_codes.items():
        for code in codes:
            if phone_number.startswith(code.strip('+')):
                return country
    return "Unknown"

@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, "Welcome! Please enter a phone number to get the corresponding country. Or type /ex to quit.")

@bot.message_handler(func=lambda message: True)
def echo_all(message):
    if message.text.lower() == "/ex":
        bot.reply_to(message, "Bot is shutting down.")
        raise SystemExit()
    else:
        phone_number = message.text
        if not phone_number.startswith("+"):
            phone_number = "+" + phone_number
        country = find_country(phone_number)
        bot.reply_to(message, f"Country: {country}")

bot.polling()
